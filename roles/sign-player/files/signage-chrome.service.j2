# This unit was created by ansible-digital-signage. Any modifications will be lost next time the playbook is run.
# More information can be found at https://github.com/sheepman4267/ansible-digital-signage

[Unit]
Description=Start Google Chrome in Kiosk mode for ansible-digital-signage
After=graphical.target systemd-user-sessions.service signage-startx.service

[Service]
User={{ signage_user }}
WorkingDirectory=~

PAMName=login

Environment=DISPLAY=:0

StandardOutput=journal
ExecStartPre=/usr/bin/xrandr --output {{ display_connection }} --rotate {{ signage_orientation }} --auto
ExecStart=bash -c "/usr/bin/google-chrome-stable --kiosk $(cat /var/ansible-digital-signage/current)"
ExecStopPost=/usr/bin/xrandr --output {{ display_connection }} --off
Restart=no